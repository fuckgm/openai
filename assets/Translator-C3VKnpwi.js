import{G as mt,r as k,g as bt,u as Ie,n as Me,j as b,B as Z,L as K,a as yt,_ as ee,c as Tt}from"./index-CcjdykQ_.js";import{M as St,a as wt,T as Pe,b as Rt,c as Ct}from"./TTSButton-BnxDMtQo.js";function xt(t){return mt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M4.99255 12.9841C4.44027 12.9841 3.99255 13.4318 3.99255 13.9841C3.99255 14.3415 4.18004 14.6551 4.46202 14.8319L7.14964 17.5195C7.54016 17.9101 8.17333 17.9101 8.56385 17.5195C8.95438 17.129 8.95438 16.4958 8.56385 16.1053L7.44263 14.9841H14.9926C15.5448 14.9841 15.9926 14.5364 15.9926 13.9841C15.9926 13.4318 15.5448 12.9841 14.9926 12.9841L5.042 12.9841C5.03288 12.984 5.02376 12.984 5.01464 12.9841H4.99255Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M19.0074 11.0159C19.5597 11.0159 20.0074 10.5682 20.0074 10.0159C20.0074 9.6585 19.82 9.3449 19.538 9.16807L16.8504 6.48045C16.4598 6.08993 15.8267 6.08993 15.4361 6.48045C15.0456 6.87098 15.0456 7.50414 15.4361 7.89467L16.5574 9.01589L9.00745 9.01589C8.45516 9.01589 8.00745 9.46361 8.00745 10.0159C8.00745 10.5682 8.45516 11.0159 9.00745 11.0159L18.958 11.0159C18.9671 11.016 18.9762 11.016 18.9854 11.0159H19.0074Z",fill:"currentColor"},child:[]}]})(t)}function ue(){return ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ue.apply(null,arguments)}function _t(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}var Lt=k.useLayoutEffect,At=function(e){var n=k.useRef(e);return Lt(function(){n.current=e}),n},ze=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},kt=function(e,n){var r=k.useRef();return k.useCallback(function(c){e.current=c,r.current&&ze(r.current,null),r.current=n,n&&ze(n,c)},[n])},Ee={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Mt=function(e){Object.keys(Ee).forEach(function(n){e.style.setProperty(n,Ee[n],"important")})},je=Mt,j=null,Oe=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Pt(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),j||(j=document.createElement("textarea"),j.setAttribute("tabindex","-1"),j.setAttribute("aria-hidden","true"),je(j)),j.parentNode===null&&document.body.appendChild(j);var c=t.paddingSize,f=t.borderSize,u=t.sizingStyle,T=u.boxSizing;Object.keys(u).forEach(function(o){var a=o;j.style[a]=u[a]}),je(j),j.value=e;var l=Oe(j,t);j.value=e,l=Oe(j,t),j.value="x";var w=j.scrollHeight-c,R=w*n;T==="border-box"&&(R=R+c+f),l=Math.max(R,l);var h=w*r;return T==="border-box"&&(h=h+c+f),l=Math.min(h,l),[l,w]}var Ne=function(){},zt=function(e,n){return e.reduce(function(r,c){return r[c]=n[c],r},{})},Et=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],jt=!!document.documentElement.currentStyle,Ot=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=zt(Et,n),c=r.boxSizing;if(c==="")return null;jt&&c==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var f=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),u=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:f,borderSize:u}},Nt=Ot;function Fe(t,e,n){var r=At(n);k.useLayoutEffect(function(){var c=function(u){return r.current(u)};if(t)return t.addEventListener(e,c),function(){return t.removeEventListener(e,c)}},[])}var $t=function(e){Fe(window,"resize",e)},Dt=function(e){Fe(document.fonts,"loadingdone",e)},Ht=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],It=function(e,n){var r=e.cacheMeasurements,c=e.maxRows,f=e.minRows,u=e.onChange,T=u===void 0?Ne:u,l=e.onHeightChange,w=l===void 0?Ne:l,R=_t(e,Ht),h=R.value!==void 0,o=k.useRef(null),a=kt(o,n),i=k.useRef(0),g=k.useRef(),p=function(){var A=o.current,N=r&&g.current?g.current:Nt(A);if(N){g.current=N;var y=Pt(N,A.value||A.placeholder||"x",f,c),_=y[0],S=y[1];i.current!==_&&(i.current=_,A.style.setProperty("height",_+"px","important"),w(_,{rowHeight:S}))}},v=function(A){h||p(),T(A)};return k.useLayoutEffect(p),$t(p),Dt(p),k.createElement("textarea",ue({},R,{onChange:v,ref:a}))},$e=k.forwardRef(It),ce={},Be={},O={};Object.defineProperty(O,"__esModule",{value:!0});O.browserSupportsPolyfills=O.compareTwoStringsUsingDiceCoefficient=O.commandToRegExp=O.concatTranscripts=O.debounce=void 0;var Ft=function(e,n,r){var c;return function(){var f=this,u=arguments,T=function(){c=null,r||e.apply(f,u)},l=r&&!c;clearTimeout(c),c=setTimeout(T,n),l&&e.apply(f,u)}};O.debounce=Ft;var Bt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(function(c){return c.trim()}).join(" ").trim()};O.concatTranscripts=Bt;var Wt=/\s*\((.*?)\)\s*/g,Gt=/(\(\?:[^)]+\))\?/g,qt=/(\(\?)?:\w+/g,Ut=/\*/g,Vt=/[-{}[\]+?.,\\^$|#]/g,Zt=function(e){return e instanceof RegExp?new RegExp(e.source,"i"):(e=e.replace(Vt,"\\$&").replace(Wt,"(?:$1)?").replace(qt,function(n,r){return r?n:"([^\\s]+)"}).replace(Ut,"(.*?)").replace(Gt,"\\s*$1?\\s*"),new RegExp("^"+e+"$","i"))};O.commandToRegExp=Zt;var Kt=function(e,n){if(e=e.replace(/\s+/g,"").toLowerCase(),n=n.replace(/\s+/g,"").toLowerCase(),!e.length&&!n.length)return 1;if(!e.length||!n.length)return 0;if(e===n)return 1;if(e.length===1&&n.length===1||e.length<2||n.length<2)return 0;for(var r=new Map,c=0;c<e.length-1;c++){var f=e.substring(c,c+2),u=r.has(f)?r.get(f)+1:1;r.set(f,u)}for(var T=0,l=0;l<n.length-1;l++){var w=n.substring(l,l+2),R=r.has(w)?r.get(w):0;R>0&&(r.set(w,R-1),T++)}return 2*T/(e.length+n.length-2)};O.compareTwoStringsUsingDiceCoefficient=Kt;var Yt=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};O.browserSupportsPolyfills=Yt;var Y={},V={};Object.defineProperty(V,"__esModule",{value:!0});V.APPEND_TRANSCRIPT=V.CLEAR_TRANSCRIPT=void 0;var Jt="CLEAR_TRANSCRIPT";V.CLEAR_TRANSCRIPT=Jt;var Xt="APPEND_TRANSCRIPT";V.APPEND_TRANSCRIPT=Xt;Object.defineProperty(Y,"__esModule",{value:!0});Y.appendTranscript=Y.clearTranscript=void 0;var We=V,Qt=function(){return{type:We.CLEAR_TRANSCRIPT}};Y.clearTranscript=Qt;var en=function(e,n){return{type:We.APPEND_TRANSCRIPT,payload:{interimTranscript:e,finalTranscript:n}}};Y.appendTranscript=en;var ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.transcriptReducer=void 0;var De=V,tn=O,nn=function(e,n){switch(n.type){case De.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case De.APPEND_TRANSCRIPT:return{interimTranscript:n.payload.interimTranscript,finalTranscript:(0,tn.concatTranscripts)(e.finalTranscript,n.payload.finalTranscript)};default:throw new Error}};ie.transcriptReducer=nn;var Ge={},le={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};t.default=e})(le);var fe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isNative=void 0;var e=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),n=function(f){return f===e};t.isNative=n;var r=e;t.default=r})(fe);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=c(le),n=O,r=fe;function c(h){return h&&h.__esModule?h:{default:h}}function f(h,o,a,i,g,p,v){try{var C=h[p](v),A=C.value}catch(N){a(N);return}C.done?o(A):Promise.resolve(A).then(i,g)}function u(h){return function(){var o=this,a=arguments;return new Promise(function(i,g){var p=h.apply(o,a);function v(A){f(p,i,g,v,C,"next",A)}function C(A){f(p,i,g,v,C,"throw",A)}v(void 0)})}}function T(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}function l(h,o){for(var a=0;a<o.length;a++){var i=o[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(h,i.key,i)}}function w(h,o,a){return o&&l(h.prototype,o),h}var R=function(){function h(o){T(this,h),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(o),(0,e.default)()&&(this.updateFinalTranscript=(0,n.debounce)(this.updateFinalTranscript,250,!0))}return w(h,[{key:"setSpeechRecognition",value:function(a){var i=!!a&&((0,r.isNative)(a)||(0,n.browserSupportsPolyfills)());i&&(this.disableRecognition(),this.recognition=new a,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(i)}},{key:"subscribe",value:function(a,i){this.subscribers[a]=i}},{key:"unsubscribe",value:function(a){delete this.subscribers[a]}},{key:"emitListeningChange",value:function(a){var i=this;this.listening=a,Object.keys(this.subscribers).forEach(function(g){var p=i.subscribers[g].onListeningChange;p(a)})}},{key:"emitMicrophoneAvailabilityChange",value:function(a){var i=this;this.isMicrophoneAvailable=a,Object.keys(this.subscribers).forEach(function(g){var p=i.subscribers[g].onMicrophoneAvailabilityChange;p(a)})}},{key:"emitTranscriptChange",value:function(a,i){var g=this;Object.keys(this.subscribers).forEach(function(p){var v=g.subscribers[p].onTranscriptChange;v(a,i)})}},{key:"emitClearTranscript",value:function(){var a=this;Object.keys(this.subscribers).forEach(function(i){var g=a.subscribers[i].onClearTranscript;g()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(a){var i=this;Object.keys(this.subscribers).forEach(function(g){var p=i.subscribers[g],v=p.onBrowserSupportsSpeechRecognitionChange,C=p.onBrowserSupportsContinuousListeningChange;v(a),C(a)})}},{key:"disconnect",value:function(a){if(this.recognition&&this.listening)switch(a){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(a){a&&a.error&&a.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(a){var i=a.results,g=a.resultIndex,p=g===void 0?i.length-1:g;this.interimTranscript="",this.finalTranscript="";for(var v=p;v<i.length;++v)i[v].isFinal&&(!(0,e.default)()||i[v][0].confidence>0)?this.updateFinalTranscript(i[v][0].transcript):this.interimTranscript=(0,n.concatTranscripts)(this.interimTranscript,i[v][0].transcript);var C=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(C=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,C||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(a){this.finalTranscript=(0,n.concatTranscripts)(this.finalTranscript,a)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var o=u(regeneratorRuntime.mark(function i(){var g,p,v,C,A,N,y=arguments;return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(g=y.length>0&&y[0]!==void 0?y[0]:{},p=g.continuous,v=p===void 0?!1:p,C=g.language,this.recognition){S.next=3;break}return S.abrupt("return");case 3:if(A=v!==this.recognition.continuous,N=C&&C!==this.recognition.lang,!(A||N)){S.next=11;break}if(!this.listening){S.next=9;break}return S.next=9,this.stopListening();case 9:this.recognition.continuous=A?v:this.recognition.continuous,this.recognition.lang=N?C:this.recognition.lang;case 11:if(this.listening){S.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),S.prev=13,S.next=16,this.start();case 16:this.emitListeningChange(!0),S.next=22;break;case 19:S.prev=19,S.t0=S.catch(13),S.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return S.stop()}},i,this,[[13,19]])}));function a(){return o.apply(this,arguments)}return a}()},{key:"abortListening",value:function(){var o=u(regeneratorRuntime.mark(function i(){var g=this;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),v.next=4,new Promise(function(C){g.onStopListening=C});case 4:case"end":return v.stop()}},i,this)}));function a(){return o.apply(this,arguments)}return a}()},{key:"stopListening",value:function(){var o=u(regeneratorRuntime.mark(function i(){var g=this;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),v.next=4,new Promise(function(C){g.onStopListening=C});case 4:case"end":return v.stop()}},i,this)}));function a(){return o.apply(this,arguments)}return a}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var o=u(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(this.recognition&&!this.listening)){p.next=4;break}return p.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return p.stop()}},i,this)}));function a(){return o.apply(this,arguments)}return a}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),h}();t.default=R})(Ge);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useSpeechRecognition=void 0;var e=k,n=O,r=Y,c=ie,f=l(Ge),u=l(le),T=l(fe);function l(s){return s&&s.__esModule?s:{default:s}}function w(s,m,d,x,M,L,P){try{var z=s[L](P),H=z.value}catch(W){d(W);return}z.done?m(H):Promise.resolve(H).then(x,M)}function R(s){return function(){var m=this,d=arguments;return new Promise(function(x,M){var L=s.apply(m,d);function P(H){w(L,x,M,P,z,"next",H)}function z(H){w(L,x,M,P,z,"throw",H)}P(void 0)})}}function h(s){return i(s)||a(s)||C(s)||o()}function o(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(s){if(typeof Symbol<"u"&&Symbol.iterator in Object(s))return Array.from(s)}function i(s){if(Array.isArray(s))return A(s)}function g(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(d){return typeof d}:g=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},g(s)}function p(s,m){return y(s)||N(s,m)||C(s,m)||v()}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(s,m){if(s){if(typeof s=="string")return A(s,m);var d=Object.prototype.toString.call(s).slice(8,-1);if(d==="Object"&&s.constructor&&(d=s.constructor.name),d==="Map"||d==="Set")return Array.from(s);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return A(s,m)}}function A(s,m){(m==null||m>s.length)&&(m=s.length);for(var d=0,x=new Array(m);d<m;d++)x[d]=s[d];return x}function N(s,m){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(s)))){var d=[],x=!0,M=!1,L=void 0;try{for(var P=s[Symbol.iterator](),z;!(x=(z=P.next()).done)&&(d.push(z.value),!(m&&d.length===m));x=!0);}catch(H){M=!0,L=H}finally{try{!x&&P.return!=null&&P.return()}finally{if(M)throw L}}return d}}function y(s){if(Array.isArray(s))return s}var _=!!T.default,S=_&&!(0,u.default)(),$,J=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=m.transcribing,x=d===void 0?!0:d,M=m.clearTranscriptOnListen,L=M===void 0?!0:M,P=m.commands,z=P===void 0?[]:P,H=(0,e.useState)(I.getRecognitionManager()),W=p(H,1),G=W[0],qe=(0,e.useState)(_),pe=p(qe,2),Ue=pe[0],Ve=pe[1],Ze=(0,e.useState)(S),he=p(Ze,2),Ke=he[0],Ye=he[1],Je=(0,e.useReducer)(c.transcriptReducer,{interimTranscript:G.interimTranscript,finalTranscript:""}),ge=p(Je,2),de=ge[0],ve=de.interimTranscript,me=de.finalTranscript,be=ge[1],Xe=(0,e.useState)(G.listening),ye=p(Xe,2),Qe=ye[0],et=ye[1],tt=(0,e.useState)(G.isMicrophoneAvailable),Te=p(tt,2),nt=Te[0],rt=Te[1],Se=(0,e.useRef)(z);Se.current=z;var we=function(){be((0,r.clearTranscript)())},X=(0,e.useCallback)(function(){G.resetTranscript(),we()},[G]),it=function(E,B,U){var q=g(E)==="object"?E.toString():E,Q=q.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),te=(0,n.compareTwoStringsUsingDiceCoefficient)(Q,B);return te>=U?{command:E,commandWithoutSpecials:Q,howSimilar:te,isFuzzyMatch:!0}:null},at=function(E,B){var U=(0,n.commandToRegExp)(E),q=U.exec(B);return q?{command:E,parameters:q.slice(1)}:null},Re=(0,e.useCallback)(function(F,E){Se.current.forEach(function(B){var U=B.command,q=B.callback,Q=B.matchInterim,te=Q===void 0?!1:Q,_e=B.isFuzzyMatch,Le=_e===void 0?!1:_e,Ae=B.fuzzyMatchingThreshold,ot=Ae===void 0?.8:Ae,ke=B.bestMatchOnly,ut=ke===void 0?!1:ke,ne=!E&&te?F.trim():E.trim(),ct=Array.isArray(U)?U:[U],re=ct.map(function(D){return Le?it(D,ne,ot):at(D,ne)}).filter(function(D){return D});if(Le&&ut&&re.length>=2){re.sort(function(D,oe){return oe.howSimilar-D.howSimilar});var se=re[0],lt=se.command,ft=se.commandWithoutSpecials,pt=se.howSimilar;q(ft,ne,pt,{command:lt,resetTranscript:X})}else re.forEach(function(D){if(D.isFuzzyMatch){var oe=D.command,ht=D.commandWithoutSpecials,gt=D.howSimilar;q(ht,ne,gt,{command:oe,resetTranscript:X})}else{var dt=D.command,vt=D.parameters;q.apply(void 0,h(vt).concat([{command:dt,resetTranscript:X}]))}})})},[X]),Ce=(0,e.useCallback)(function(F,E){x&&be((0,r.appendTranscript)(F,E)),Re(F,E)},[Re,x]),xe=(0,e.useCallback)(function(){L&&we()},[L]);(0,e.useEffect)(function(){var F=I.counter;I.counter+=1;var E={onListeningChange:et,onMicrophoneAvailabilityChange:rt,onTranscriptChange:Ce,onClearTranscript:xe,onBrowserSupportsSpeechRecognitionChange:Ve,onBrowserSupportsContinuousListeningChange:Ye};return G.subscribe(F,E),function(){G.unsubscribe(F)}},[x,L,G,Ce,xe]);var st=(0,n.concatTranscripts)(me,ve);return{transcript:st,interimTranscript:ve,finalTranscript:me,listening:Qe,isMicrophoneAvailable:nt,resetTranscript:X,browserSupportsSpeechRecognition:Ue,browserSupportsContinuousListening:Ke}};t.useSpeechRecognition=J;var I={counter:0,applyPolyfill:function(m){$?$.setSpeechRecognition(m):$=new f.default(m);var d=!!m&&(0,n.browserSupportsPolyfills)();_=d,S=d},removePolyfill:function(){$?$.setSpeechRecognition(T.default):$=new f.default(T.default),_=!!T.default,S=_&&!(0,u.default)()},getRecognitionManager:function(){return $||($=new f.default(T.default)),$},getRecognition:function(){var m=I.getRecognitionManager();return m.getRecognition()},startListening:function(){var s=R(regeneratorRuntime.mark(function d(){var x,M,L,P,z=arguments;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return x=z.length>0&&z[0]!==void 0?z[0]:{},M=x.continuous,L=x.language,P=I.getRecognitionManager(),W.next=4,P.startListening({continuous:M,language:L});case 4:case"end":return W.stop()}},d)}));function m(){return s.apply(this,arguments)}return m}(),stopListening:function(){var s=R(regeneratorRuntime.mark(function d(){var x;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return x=I.getRecognitionManager(),L.next=3,x.stopListening();case 3:case"end":return L.stop()}},d)}));function m(){return s.apply(this,arguments)}return m}(),abortListening:function(){var s=R(regeneratorRuntime.mark(function d(){var x;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return x=I.getRecognitionManager(),L.next=3,x.abortListening();case 3:case"end":return L.stop()}},d)}));function m(){return s.apply(this,arguments)}return m}(),browserSupportsSpeechRecognition:function(){return _},browserSupportsContinuousListening:function(){return S}},ae=I;t.default=ae})(Be);(function(t){function e(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(l){return typeof l}:e=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(u)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useSpeechRecognition",{enumerable:!0,get:function(){return n.useSpeechRecognition}}),t.default=void 0;var n=c(Be);function r(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return r=function(){return u},u}function c(u){if(u&&u.__esModule)return u;if(u===null||e(u)!=="object"&&typeof u!="function")return{default:u};var T=r();if(T&&T.has(u))return T.get(u);var l={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in u)if(Object.prototype.hasOwnProperty.call(u,R)){var h=w?Object.getOwnPropertyDescriptor(u,R):null;h&&(h.get||h.set)?Object.defineProperty(l,R,h):l[R]=u[R]}return l.default=u,T&&T.set(u,l),l}var f=n.default;t.default=f})(ce);const He=bt(ce);function rn(t){const{language:e,onChangeTranscript:n,...r}=t,{t:c}=Ie(),{transcript:f,listening:u,resetTranscript:T,browserSupportsSpeechRecognition:l}=ce.useSpeechRecognition();k.useEffect(()=>{n(f)},[n,f]);const w=k.useCallback(()=>{u?(He.stopListening(),Me.success(c("Recording stopped."))):(T(),He.startListening({language:e==="wyw"?"zh-TW":e,continuous:!0}),Me.success(c("Recording started.")))},[e,u,T,c]);return l?(r.type="button",b.jsx(Z,{shape:"circle",color:u?"error":"ghost",size:"sm",title:c(u?"Stop speaking":"Start speaking"),onClick:w,...r,children:u?b.jsx(St,{size:"16"}):b.jsx(wt,{size:"16"})})):null}const an=(t,e,n)=>{const{gender:r}=n,c=r==="male"?"masculine":"feminine",f=sn(e,r);if(t==="wyw"||t==="zh-Hans"||t==="zh-Hant"){if(e==="zh-Hant")return`翻譯成繁體白話文，使用台灣用語。${f}`;if(e==="zh-Hans")return`翻译成简体白话文。${f}`;if(e==="yue")return`翻譯成粵語白話文。${f}`}return e==="wyw"||e==="yue"?`翻譯成${K[e]||e}。${f}`:t==="auto"?e==="zh-Hant"?`翻譯為繁體中文，使用台灣用語。${f}`:e==="zh-Hans"?`翻译成简体中文。${f}`:e==="ja"?`Translate into Japanese. ${f}`:`Translate into ${K[e]||e}. ${f}`:t===e?e==="zh-Hans"?`润色此句，使用${r==="male"?"男性化":"女性化"}的语言风格。`:e==="zh-Hant"?`把這段文字潤飾一下，使用台灣用語，並採用${r==="male"?"男性化":"女性化"}的語言風格。`:e==="ja"?`この文を磨き、${r==="male"?"男性的":"女性的"}な言葉遣いにしてください。`:e==="ko"?`이 문장을 예쁘게 만들어주시고, ${r==="male"?"남성적인":"여성적인"} 말투를 사용해주세요.`:`Polish this sentence using ${c} language style.`:`Translate from ${K[t]||t} to ${K[e]||e}. ${f}`};function sn(t,e){switch(t){case"zh-Hans":return e==="male"?"使用男性化的语言风格，如更直接、简洁的表达。":"使用女性化的语言风格，如更委婉、细腻的表达。";case"zh-Hant":return e==="male"?"使用男性化的語言風格，如更直接、簡潔的表達。":"使用女性化的語言風格，如更委婉、細膩的表達。";case"ja":return e==="male"?"男性的な言葉遣いを使用してください。例えば、より直接的で簡潔な表現を用いてください。":"女性的な言葉遣いを使用してください。例えば、より丁寧で婉曲的な表現を用いてください。";case"ko":return e==="male"?"남성적인 말투를 사용해주세요. 예를 들어, 더 직접적이고 간결한 표현을 사용해주세요.":"여성적인 말투를 사용해주세요. 예를 들어, 더 공손하고 우회적인 표현을 사용해주세요.";default:return`Use ${e==="male"?"masculine":"feminine"} language style in the translation. For example, use ${e==="male"?"more direct and concise":"more polite and expressive"} language.`}}function cn(){const{t,i18n:e}=Ie(),n=k.useRef(null),[r,c]=k.useState({gender:"male",style:"casual"}),{configValues:{openaiApiKey:f,currentModel:u,temperatureParam:T},translator:{lastTranslateData:l,setLastTranslateData:w,translateText:R,setTranslateText:h,translatedText:o,mutateTranslateText:a,isTranslating:i,isTranslateError:g}}=yt();k.useEffect(()=>{g&&ee.error(t("Something went wrong, please try again later."))},[g,t]);const p=k.useCallback(()=>{if(!o){ee.error(t("Nothing to copy!"));return}navigator.clipboard.writeText(o).then(()=>{ee.success(t("Copied!"))}).catch(()=>{ee.error(t("Failed to copy!"))})},[t,o]),v=k.useCallback(()=>w(y=>({...y,fromLang:y.toLang,toLang:y.fromLang})),[w]),C=k.useCallback(y=>{!n.current||!y||(n.current.value=y,n.current.defaultValue=y,h(y))},[h]),A=k.useCallback(y=>{if(y.preventDefault(),!f){ee.error(t("Please enter your API Key in config page first!"));return}const _=new FormData(y.currentTarget),{translateText:S,fromLang:$,toLang:J}=Object.fromEntries(_.entries());if(!S||!$||!J)return;h(S);const I=an($,J,r);w(ae=>({...ae,fromLang:$,toLang:J})),a({token:f,engine:u,prompt:I,temperatureParam:T,queryText:S})},[u,a,f,w,h,t,T,r]),N=k.useCallback(()=>{n.current&&(n.current.value="",h(""))},[h]);return b.jsx("form",{method:"post",onSubmit:A,children:b.jsxs("div",{className:"container max-w-screen-2xl xl:mx-auto md:grid md:grid-cols-2 md:gap-4",children:[b.jsxs("div",{className:"w-full md:min-h-[calc(100vh_-_112px)] max-w-full p-4 m-0 shadow-md top-16 bg-base-100",children:[b.jsxs("div",{className:"flex flex-row mb-4",children:[b.jsx("select",{className:"w-[22%] select",value:l.fromLang,onChange:y=>w(_=>({..._,fromLang:y.target.value})),name:"fromLang",title:"From Language",required:!0,children:Object.entries(K).map(([y,_])=>b.jsx("option",{value:y,children:_},y))}),b.jsx("div",{className:"flex justify-center w-[10%]",children:b.jsx(Z,{type:"button",color:"ghost",shape:"circle",onClick:v,title:"Exchange",children:b.jsx(xt,{size:20})})}),b.jsx("select",{className:"w-[22%] select",value:l.toLang,onChange:y=>w(_=>({..._,toLang:y.target.value})),name:"toLang",title:"To language",required:!0,children:Object.entries(K).map(([y,_])=>b.jsx("option",{value:y,children:_},y))}),b.jsxs("select",{className:"w-[20%] select ml-2",value:r.gender,onChange:y=>c(_=>({..._,gender:y.target.value})),name:"gender",title:"Gender",children:[b.jsx("option",{value:"male",children:t("Male")}),b.jsx("option",{value:"female",children:t("Female")})]})]}),b.jsxs("div",{className:"form-control",children:[b.jsxs("div",{className:"relative",children:[b.jsx($e,{ref:n,name:"translateText",defaultValue:R,className:"w-full mb-2 whitespace-pre-line break-words resize-none rounded-2xl textarea textarea-md textarea-primary md:min-h-[120px] pb-10",placeholder:t("Please enter the text you want to translate here."),onChange:y=>h(y.target.value),disabled:i,required:!0}),b.jsxs("div",{className:"absolute flex flex-row justify-between left-0 bottom-5 w-full px-2",children:[b.jsxs("div",{className:"flex flex-row justify-start gap-2",children:[b.jsx(rn,{language:l.fromLang==="auto"?e.language:l.fromLang,onChangeTranscript:C,disabled:i}),!!R&&b.jsx(Pe,{language:l.fromLang==="auto"?e.language:l.fromLang,text:R,gender:r.gender})]}),!!R&&b.jsx(Z,{type:"button",shape:"circle",color:"ghost",size:"sm",title:"Clear the input",onClick:N,children:b.jsx(Rt,{size:"16"})})]})]}),b.jsx(Z,{type:"submit",color:"primary",className:"md:hidden",loading:i,disabled:i,children:t(i?"Translating...":"Translate")})]})]}),b.jsxs("div",{className:"p-4 pb-14 m-0 form-control",children:[b.jsx(Z,{type:"submit",color:"primary",className:"hidden mb-4 md:inline-flex",loading:i,disabled:i,children:t(i?"Translating...":"Translate")}),b.jsxs("div",{className:"relative",children:[b.jsx($e,{name:"translatedText",value:o||"",className:Tt("w-full mb-2 whitespace-pre-line break-words resize-none rounded-2xl textarea textarea-md textarea-ghost md:min-h-[120px]",!!o&&!i&&"pb-10"),placeholder:t(i?"Please wait...":"Translated text will appear here."),readOnly:!0,required:!0}),b.jsxs("div",{className:"absolute flex flex-row justify-between left-0 bottom-5 w-full px-2",children:[!!o&&b.jsx(Pe,{language:l.toLang==="auto"?e.language:l.toLang,text:o||"",gender:r.gender}),!!o&&!i&&b.jsx(Z,{type:"button",shape:"circle",color:"ghost",size:"sm",title:t("Copy translated text"),onClick:p,children:b.jsx(Ct,{size:"16"})})]})]})]})]})})}export{cn as default};
